# https://rasa.com/docs/rasa/domain/

version: "3.1"

config:
  store_entities_as_slots: true

session_config:
  session_expiration_time: 300
  carry_over_slots_to_new_session: true

intents:
- affirm
- deny
- greet
- bye
- thank
- canthelp
- react_positive
- react_negative
- explain
- human_handoff
- restart
- chitchat
- out_of_scope
- faq
- nlu_fallback
- exit
# Customer Queries
- request_table_reservation
- inform_email
- inform_reservation_people_count

entities:
  # - date
  # - time
  - number
  - email
  - weekday
  - weekend
  - event

slots:
  # date:
  #   type: any
  #   mappings:
  #   - type: from_entity
  #     entity: date

  # time:
  #   type: any
  #   mappings:
  #   - type: from_entity
  #     entity: time

  weekday:
    type: text
    mappings:
    - type: from_entity
      entity: weekday

  weekend:
    type: text
    mappings:
    - type: from_entity
      entity: weekend

  event:
    type: text
    mappings:
    - type: from_entity
      entity: event

  privacy_policy_url:
    type: text
    initial_value: "https://rasa.com/privacy-policy/"
    mappings:
    - type: custom

  opening_time:
    type: text
    initial_value: "09:00 AM"
    mappings:
    - type: custom

  closing_time:
    type: text
    initial_value: "10:00 PM"
    mappings:
    - type: custom

  customer_email:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: email
      intent: inform_email

  people_count:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: number
      intent: [inform_reservation_people_count, request_table_reservation]

  is_table_available:
    type: bool
    influence_conversation: true
    mappings:
    - type: custom

  is_reserved:
    type: bool
    initial_value: false
    influence_conversation: false
    mappings:
    - type: custom

  # requested_slot:
  #   type: categorical
  #   influence_conversation: true
  #   values:
  #     - customer_email
  #     - people_count
  #   mappings:
  #   - type: custom

actions:
  - action_check_table_availability
  - action_reserve_table
  - action_reset_slots
  
forms:
  table_reservation_form:
    required_slots:
      - customer_email
      - people_count
