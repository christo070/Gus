version: "3.1"

rules:

- rule: activate table reservation form
  steps:
  - intent: request_table_reservation
  - action: table_reservation_form
  - active_loop: table_reservation_form
  # wait_for_user_input: false

- rule: submit table reservation form + table available
  condition:
  - active_loop: table_reservation_form
  steps:
  - action: table_reservation_form
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_check_table_availability
  - slot_was_set:
    - table_availability: yes
  - action: action_reserve_table

- rule: submit table reservation form + table unavailable
  condition:
  - active_loop: table_reservation_form
  steps:
  - action: table_reservation_form
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_check_table_availability
  - slot_was_set:
    - table_availability: no
  - action: utter_reservation_housefull